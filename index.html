<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Intro ‚Äì Nexus Marimo</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-a986a95301e671fce2c6472dffc862a1.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="https://cdn.jsdelivr.net/npm/@marimo-team/islands@0.14.11/dist/main.js"></script>
<link href="https://cdn.jsdelivr.net/npm/@marimo-team/islands@0.14.11/dist/style.css" rel="stylesheet" crossorigin="anonymous">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;500;700&amp;family=Lora&amp;family=PT+Sans:wght@400;700&amp;display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-wcIxkf4k558AjM3Yz3BBFQUbk/zgIYC2R0QpeeYb+TwlBVMrlgLqwRjRtGZiK7ww" crossorigin="anonymous">
</head><body class="nav-fixed quarto-light"><marimo-filename hidden=""></marimo-filename>


<link rel="stylesheet" href="styles.css">




<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Nexus Marimo</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#reactive-execution" id="toc-reactive-execution" class="nav-link active" data-scroll-target="#reactive-execution">1. Reactive execution</a></li>
  <li><a href="#ui-elements" id="toc-ui-elements" class="nav-link" data-scroll-target="#ui-elements">2. UI elements</a></li>
  <li><a href="#marimo-is-just-python" id="toc-marimo-is-just-python" class="nav-link" data-scroll-target="#marimo-is-just-python">3. marimo is just Python</a></li>
  <li><a href="#finally-a-fun-fact" id="toc-finally-a-fun-fact" class="nav-link" data-scroll-target="#finally-a-fun-fact">Finally, a fun fact</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Intro</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<marimo-island data-app-id="main" data-cell-id="Hbol" data-reactive="true">
    <marimo-cell-output>
    <span class="markdown prose dark:prose-invert"><h1 id="welcome-to-marimo">Welcome to marimo! üåäüçÉ</h1></span>
    </marimo-cell-output>
    <marimo-cell-code hidden="">import%20marimo%20as%20mo%0A%0Amo.md(%22%23%20Welcome%20to%20marimo!%20%F0%9F%8C%8A%F0%9F%8D%83%22)</marimo-cell-code>
</marimo-island>
<marimo-island data-app-id="main" data-cell-id="MJUe" data-reactive="true">
    <marimo-cell-output>
    <span></span>
    </marimo-cell-output>
    <marimo-cell-code hidden="">slider%20%3D%20mo.ui.slider(1%2C%2022)</marimo-cell-code>
</marimo-island>
<marimo-island data-app-id="main" data-cell-id="vblA" data-reactive="true">
            <marimo-cell-output>
            <span class="markdown prose dark:prose-invert"><span class="paragraph">marimo is a <strong>reactive</strong> Python notebook.</span>
<span class="paragraph">This means that unlike traditional notebooks, marimo notebooks <strong>run
automatically</strong> when you modify them or
interact with UI elements, like this slider: <marimo-ui-element object-id="MJUe-0" random-id="4ff865df-87fb-64c5-aa55-d334d40e67d1"><marimo-slider data-initial-value="1" data-label="null" data-start="1" data-stop="22" data-steps="[]" data-debounce="false" data-disabled="false" data-orientation="&quot;horizontal&quot;" data-show-value="false" data-include-input="false" data-full-width="false"></marimo-slider></marimo-ui-element>.</span>
<h2 id="_1" class="anchored">üçÉ</h2></span>
            </marimo-cell-output>
            <marimo-cell-code hidden="">mo.md(%0A%20%20%20%20f%22%22%22%0A%20%20%20%20marimo%20is%20a%20**reactive**%20Python%20notebook.%0A%0A%20%20%20%20This%20means%20that%20unlike%20traditional%20notebooks%2C%20marimo%20notebooks%20**run%0A%20%20%20%20automatically**%20when%20you%20modify%20them%20or%0A%20%20%20%20interact%20with%20UI%20elements%2C%20like%20this%20slider%3A%20%7Bslider%7D.%0A%0A%20%20%20%20%7B%22%23%23%22%20%2B%20%22%F0%9F%8D%83%22%20*%20slider.value%7D%0A%20%20%20%20%22%22%22%0A)</marimo-cell-code>
        </marimo-island>
<marimo-island data-app-id="main" data-cell-id="bkHC" data-reactive="true">
            <marimo-cell-output>
            <marimo-accordion data-labels="[&quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Tip: disabling automatic execution</span></span>&quot;]" data-multiple="false"><div><span class="markdown prose dark:prose-invert"><span class="paragraph">marimo lets you disable automatic execution: just go into the
notebook settings and set</span>
<span class="paragraph">"Runtime &gt; On Cell Change" to "lazy".</span>
<span class="paragraph">When the runtime is lazy, after running a cell, marimo marks its
descendants as stale instead of automatically running them. The
lazy runtime puts you in control over when cells are run, while
still giving guarantees about the notebook state.</span></span></div></marimo-accordion>
            </marimo-cell-output>
            <marimo-cell-code hidden="">mo.accordion(%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22Tip%3A%20disabling%20automatic%20execution%22%3A%20mo.md(%0A%20%20%20%20%20%20%20%20%20%20%20%20rf%22%22%22%0A%20%20%20%20%20%20%20%20marimo%20lets%20you%20disable%20automatic%20execution%3A%20just%20go%20into%20the%0A%20%20%20%20%20%20%20%20notebook%20settings%20and%20set%0A%0A%20%20%20%20%20%20%20%20%22Runtime%20%3E%20On%20Cell%20Change%22%20to%20%22lazy%22.%0A%0A%20%20%20%20%20%20%20%20When%20the%20runtime%20is%20lazy%2C%20after%20running%20a%20cell%2C%20marimo%20marks%20its%0A%20%20%20%20%20%20%20%20descendants%20as%20stale%20instead%20of%20automatically%20running%20them.%20The%0A%20%20%20%20%20%20%20%20lazy%20runtime%20puts%20you%20in%20control%20over%20when%20cells%20are%20run%2C%20while%0A%20%20%20%20%20%20%20%20still%20giving%20guarantees%20about%20the%20notebook%20state.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%7D%0A)</marimo-cell-code>
        </marimo-island>
<marimo-island data-app-id="main" data-cell-id="lEQa" data-reactive="true">
    <marimo-cell-output>
    <marimo-callout-output data-html="&quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Tip: This is a tutorial notebook. You can create your own notebooks\nby entering <code>marimo edit</code> at the command line.</span></span>&quot;" data-kind="&quot;neutral&quot;"></marimo-callout-output>
    </marimo-cell-output>
    <marimo-cell-code hidden="">mo.md(%0A%20%20%20%20%22%22%22%0A%20%20%20%20Tip%3A%20This%20is%20a%20tutorial%20notebook.%20You%20can%20create%20your%20own%20notebooks%0A%20%20%20%20by%20entering%20%60marimo%20edit%60%20at%20the%20command%20line.%0A%20%20%20%20%22%22%22%0A).callout()</marimo-cell-code>
</marimo-island>
<section id="reactive-execution" class="level2">
<h2 class="anchored" data-anchor-id="reactive-execution">1. Reactive execution</h2>
<p>A marimo notebook is made up of small blocks of Python code called cells.</p>
<p>marimo reads your cells and models the dependencies among them: whenever a cell that defines a global variable is run, marimo <strong>automatically runs</strong> all cells that reference that variable.</p>
<p>Reactivity keeps your program state and outputs in sync with your code, making for a dynamic programming environment that prevents bugs before they happen.</p>
<marimo-island data-app-id="main" data-cell-id="PKri" data-reactive="true">
            <marimo-cell-output>
            <span class="markdown prose dark:prose-invert"><span class="paragraph"><strong>üåä See it in action.</strong> In the next cell, change the value of the
variable  <code>changed</code> to <code>True</code>, then click the run button.</span></span>
            </marimo-cell-output>
            <marimo-cell-code hidden="">(%0A%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20f%22%22%22%0A%20%20%20%20%20%20%20%20**%E2%9C%A8%20Nice!**%20The%20value%20of%20%60changed%60%20is%20now%20%7Bchanged%7D.%0A%0A%20%20%20%20%20%20%20%20When%20you%20updated%20the%20value%20of%20the%20variable%20%60changed%60%2C%20marimo%0A%20%20%20%20%20%20%20%20**reacted**%20by%20running%20this%20cell%20automatically%2C%20because%20this%20cell%0A%20%20%20%20%20%20%20%20references%20the%20global%20variable%20%60changed%60.%0A%0A%20%20%20%20%20%20%20%20Reactivity%20ensures%20that%20your%20notebook%20state%20is%20always%0A%20%20%20%20%20%20%20%20consistent%2C%20which%20is%20crucial%20for%20doing%20good%20science%3B%20it's%20also%20what%0A%20%20%20%20%20%20%20%20enables%20marimo%20notebooks%20to%20double%20as%20tools%20and%20%20apps.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20)%0A%20%20%20%20if%20changed%0A%20%20%20%20else%20mo.md(%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20**%F0%9F%8C%8A%20See%20it%20in%20action.**%20In%20the%20next%20cell%2C%20change%20the%20value%20of%20the%0A%20%20%20%20%20%20%20%20variable%20%20%60changed%60%20to%20%60True%60%2C%20then%20click%20the%20run%20button.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20)%0A)</marimo-cell-code>
        </marimo-island>
<marimo-island data-app-id="main" data-cell-id="Xref" data-reactive="true">
    <marimo-cell-output>
    <span></span>
    </marimo-cell-output>
    <marimo-cell-code hidden="">changed%20%3D%20False</marimo-cell-code>
</marimo-island>
<marimo-island data-app-id="main" data-cell-id="SFPL" data-reactive="true">
            <marimo-cell-output>
            <marimo-accordion data-labels="[&quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Tip: execution order</span></span>&quot;]" data-multiple="false"><div><span class="markdown prose dark:prose-invert"><span class="paragraph">The order of cells on the page has no bearing on
the order in which cells are executed: marimo knows that a cell
reading a variable must run after the cell that  defines it. This
frees you to organize your code in the way that makes the most
sense for you.</span></span></div></marimo-accordion>
            </marimo-cell-output>
            <marimo-cell-code hidden="">mo.accordion(%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22Tip%3A%20execution%20order%22%3A%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20The%20order%20of%20cells%20on%20the%20page%20has%20no%20bearing%20on%0A%20%20%20%20%20%20%20%20%20%20%20%20the%20order%20in%20which%20cells%20are%20executed%3A%20marimo%20knows%20that%20a%20cell%0A%20%20%20%20%20%20%20%20%20%20%20%20reading%20a%20variable%20must%20run%20after%20the%20cell%20that%20%20defines%20it.%20This%0A%20%20%20%20%20%20%20%20%20%20%20%20frees%20you%20to%20organize%20your%20code%20in%20the%20way%20that%20makes%20the%20most%0A%20%20%20%20%20%20%20%20%20%20%20%20sense%20for%20you.%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%7D%0A)</marimo-cell-code>
        </marimo-island>
<p><strong>Global names must be unique.</strong> To enable reactivity, marimo imposes a constraint on how names appear in cells: no two cells may define the same variable.</p>
<marimo-island data-app-id="main" data-cell-id="BYtC" data-reactive="true">
            <marimo-cell-output>
            <marimo-accordion data-labels="[&quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Tip: encapsulation</span></span>&quot;]" data-multiple="false"><div><span class="markdown prose dark:prose-invert"><span class="paragraph">By encapsulating logic in functions, classes, or Python modules,
you can minimize the number of global variables in your notebook.</span></span></div></marimo-accordion>
            </marimo-cell-output>
            <marimo-cell-code hidden="">mo.accordion(%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22Tip%3A%20encapsulation%22%3A%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20By%20encapsulating%20logic%20in%20functions%2C%20classes%2C%20or%20Python%20modules%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20you%20can%20minimize%20the%20number%20of%20global%20variables%20in%20your%20notebook.%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%7D%0A)</marimo-cell-code>
        </marimo-island>
<marimo-island data-app-id="main" data-cell-id="RGSE" data-reactive="true">
            <marimo-cell-output>
            <marimo-accordion data-labels="[&quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Tip: private variables</span></span>&quot;]" data-multiple="false"><div><span class="markdown prose dark:prose-invert"><span class="paragraph">Variables prefixed with an underscore are "private" to a cell, so
they can be defined by multiple cells.</span></span></div></marimo-accordion>
            </marimo-cell-output>
            <marimo-cell-code hidden="">mo.accordion(%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22Tip%3A%20private%20variables%22%3A%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20Variables%20prefixed%20with%20an%20underscore%20are%20%22private%22%20to%20a%20cell%2C%20so%0A%20%20%20%20%20%20%20%20%20%20%20%20they%20can%20be%20defined%20by%20multiple%20cells.%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%7D%0A)</marimo-cell-code>
        </marimo-island>
</section>
<section id="ui-elements" class="level2">
<h2 class="anchored" data-anchor-id="ui-elements">2. UI elements</h2>
<p>Cells can output interactive UI elements. Interacting with a UI element <strong>automatically triggers notebook execution</strong>: when you interact with a UI element, its value is sent back to Python, and every cell that references that element is re-run.</p>
<p>marimo provides a library of UI elements to choose from under <code>marimo.ui</code>. <!----> <strong>üåä Some UI elements.</strong> Try interacting with the below elements.</p>
<marimo-island data-app-id="main" data-cell-id="Kclp" data-reactive="true">
    <marimo-cell-output>
    <span></span>
    </marimo-cell-output>
    <marimo-cell-code hidden="">icon%20%3D%20mo.ui.dropdown(%5B%22%F0%9F%8D%83%22%2C%20%22%F0%9F%8C%8A%22%2C%20%22%E2%9C%A8%22%5D%2C%20value%3D%22%F0%9F%8D%83%22)</marimo-cell-code>
</marimo-island>
<marimo-island data-app-id="main" data-cell-id="emfo" data-reactive="true">
    <marimo-cell-output>
    <span></span>
    </marimo-cell-output>
    <marimo-cell-code hidden="">repetitions%20%3D%20mo.ui.slider(1%2C%2016%2C%20label%3Df%22number%20of%20%7Bicon.value%7D%3A%20%22)</marimo-cell-code>
</marimo-island>
<marimo-island data-app-id="main" data-cell-id="Hstk" data-reactive="true">
    <marimo-cell-output>
    <marimo-json-output data-json-data="[&quot;text/html:<marimo-ui-element object-id='Kclp-0' random-id='efefd78a-4404-cea6-eb43-0e24b1f56dac'><marimo-dropdown data-initial-value='[&amp;quot;&amp;#92;ud83c&amp;#92;udf43&amp;quot;]' data-label='null' data-options='[&amp;quot;&amp;#92;ud83c&amp;#92;udf43&amp;quot;, &amp;quot;&amp;#92;ud83c&amp;#92;udf0a&amp;quot;, &amp;quot;&amp;#92;u2728&amp;quot;]' data-allow-select-none='false' data-searchable='false' data-full-width='false'></marimo-dropdown></marimo-ui-element>&quot;, &quot;text/html:<marimo-ui-element object-id='emfo-0' random-id='5b01aaf8-fbc8-d442-1d5b-3faf486245f1'><marimo-slider data-initial-value='1' data-label='&amp;quot;&amp;lt;span class=&amp;#92;&amp;quot;markdown prose dark:prose-invert&amp;#92;&amp;quot;&amp;gt;&amp;lt;span class=&amp;#92;&amp;quot;paragraph&amp;#92;&amp;quot;&amp;gt;number of &amp;#92;ud83c&amp;#92;udf43: &amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;quot;' data-start='1' data-stop='16' data-steps='[]' data-debounce='false' data-disabled='false' data-orientation='&amp;quot;horizontal&amp;quot;' data-show-value='false' data-include-input='false' data-full-width='false'></marimo-slider></marimo-ui-element>&quot;]" data-value-types="&quot;python&quot;"></marimo-json-output>
    </marimo-cell-output>
    <marimo-cell-code hidden="">icon%2C%20repetitions</marimo-cell-code>
</marimo-island>
<marimo-island data-app-id="main" data-cell-id="nWHF" data-reactive="true">
    <marimo-cell-output>
    <span class="markdown prose dark:prose-invert"><h1 id="_1">üçÉ</h1></span>
    </marimo-cell-output>
    <marimo-cell-code hidden="">mo.md(%22%23%20%22%20%2B%20icon.value%20*%20repetitions.value)</marimo-cell-code>
</marimo-island>
</section>
<section id="marimo-is-just-python" class="level2">
<h2 class="anchored" data-anchor-id="marimo-is-just-python">3. marimo is just Python</h2>
<p>marimo cells parse Python (and only Python), and marimo notebooks are stored as pure Python files ‚Äî outputs are <em>not</em> included. There‚Äôs no magical syntax.</p>
<p>The Python files generated by marimo are:</p>
<ul>
<li>easily versioned with git, yielding minimal diffs</li>
<li>legible for both humans and machines</li>
<li>formattable using your tool of choice,</li>
<li>usable as Python scripts, with UI elements taking their default values, and</li>
<li>importable by other modules (more on that in the future). <!----> ## 4. Running notebooks as apps</li>
</ul>
<p>marimo notebooks can double as apps. Click the app window icon in the bottom-right to see this notebook in ‚Äúapp view.‚Äù</p>
<p>Serve a notebook as an app with <code>marimo run</code> at the command-line. Of course, you can use marimo just to level-up your notebooking, without ever making apps. <!----> ## 5. The <code>marimo</code> command-line tool</p>
<p><strong>Creating and editing notebooks.</strong> Use</p>
<pre><code>marimo edit</code></pre>
<p>in a terminal to start the marimo notebook server. From here you can create a new notebook or edit existing ones.</p>
<p><strong>Running as apps.</strong> Use</p>
<pre><code>marimo run notebook.py</code></pre>
<p>to start a webserver that serves your notebook as an app in read-only mode, with code cells hidden.</p>
<p><strong>Convert a Jupyter notebook.</strong> Convert a Jupyter notebook to a marimo notebook using <code>marimo convert</code>:</p>
<pre><code>marimo convert your_notebook.ipynb &gt; your_app.py</code></pre>
<p><strong>Tutorials.</strong> marimo comes packaged with tutorials:</p>
<ul>
<li><code>dataflow</code>: more on marimo‚Äôs automatic execution</li>
<li><code>ui</code>: how to use UI elements</li>
<li><code>markdown</code>: how to write markdown, with interpolated values and LaTeX</li>
<li><code>plots</code>: how plotting works in marimo</li>
<li><code>sql</code>: how to use SQL</li>
<li><code>layout</code>: layout elements in marimo</li>
<li><code>fileformat</code>: how marimo‚Äôs file format works</li>
<li><code>markdown-format</code>: for using <code>.md</code> files in marimo</li>
<li><code>for-jupyter-users</code>: if you are coming from Jupyter</li>
</ul>
<p>Start a tutorial with <code>marimo tutorial</code>; for example,</p>
<pre><code>marimo tutorial dataflow</code></pre>
<p>In addition to tutorials, we have examples in our <a href="https://www.github.com/marimo-team/marimo/tree/main/examples">our GitHub repo</a>. <!----> ## 6. The marimo editor</p>
<p>Here are some tips to help you get started with the marimo editor.</p>
<marimo-island data-app-id="main" data-cell-id="iLit" data-reactive="true">
            <marimo-cell-output>
            <marimo-accordion data-labels="[&quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Saving</span></span>&quot;, &quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Running</span></span>&quot;, &quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Console Output</span></span>&quot;, &quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Creating, Moving, and Deleting Cells</span></span>&quot;, &quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Disabling Automatic Execution</span></span>&quot;, &quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Disabling Cells</span></span>&quot;, &quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Code Folding</span></span>&quot;, &quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Code Formatting</span></span>&quot;, &quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Command Palette</span></span>&quot;, &quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Keyboard Shortcuts</span></span>&quot;, &quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Configuration</span></span>&quot;, &quot;<span class=\&quot;markdown prose dark:prose-invert\&quot;><span class=\&quot;paragraph\&quot;>Exit &amp;amp; Shutdown</span></span>&quot;]" data-multiple="false"><div><span class="markdown prose dark:prose-invert"><span class="paragraph"><strong>Saving</strong></span>
<ul>
<li>
<span class="paragraph"><em>Name</em> your app using the box at the top of the screen, or
  with <code>Ctrl/Cmd+s</code>. You can also create a named app at the
  command line, e.g., <code>marimo edit app_name.py</code>.</span>
</li>
<li>
<span class="paragraph"><em>Save</em> by clicking the save icon on the bottom right, or by
  inputting <code>Ctrl/Cmd+s</code>. By default marimo is configured
  to autosave.</span>
</li>
</ul></span></div><div><span class="markdown prose dark:prose-invert"><ol>
<li>
<span class="paragraph"><em>Run a cell</em> by clicking the play ( ‚ñ∑ ) button on the top
right of a cell, or by inputting <code>Ctrl/Cmd+Enter</code>.</span>
</li>
<li>
<span class="paragraph"><em>Run a stale cell</em>  by clicking the yellow run button on the
right of the cell, or by inputting <code>Ctrl/Cmd+Enter</code>. A cell is
stale when its code has been modified but not run.</span>
</li>
<li>
<span class="paragraph"><em>Run all stale cells</em> by clicking the play ( ‚ñ∑ ) button on
the bottom right of the screen, or input <code>Ctrl/Cmd+Shift+r</code>.</span>
</li>
</ol></span></div><div><span class="markdown prose dark:prose-invert"><span class="paragraph">Console output (e.g., <code>print()</code> statements) is shown below a
cell.</span></span></div><div><span class="markdown prose dark:prose-invert"><ol>
<li>
<span class="paragraph"><em>Create</em> a new cell above or below a given one by clicking
    the plus button to the left of the cell, which appears on
    mouse hover.</span>
</li>
<li>
<span class="paragraph"><em>Move</em> a cell up or down by dragging on the handle to the 
    right of the cell, which appears on mouse hover.</span>
</li>
<li>
<span class="paragraph"><em>Delete</em> a cell by clicking the trash bin icon. Bring it
    back by clicking the undo button on the bottom right of the
    screen, or with <code>Ctrl/Cmd+Shift+z</code>.</span>
</li>
</ol></span></div><div><span class="markdown prose dark:prose-invert"><span class="paragraph">Via the notebook settings (gear icon) or footer panel, you
can disable automatic execution. This is helpful when
working with expensive notebooks or notebooks that have
side-effects like database transactions.</span></span></div><div><span class="markdown prose dark:prose-invert"><span class="paragraph">You can disable a cell via the cell context menu.
marimo will never run a disabled cell or any cells that depend on it.
This can help prevent accidental execution of expensive computations
when editing a notebook.</span></span></div><div><span class="markdown prose dark:prose-invert"><span class="paragraph">You can collapse or fold the code in a cell by clicking the arrow
icons in the line number column to the left, or by using keyboard
shortcuts.</span>
<span class="paragraph">Use the command palette (<code>Ctrl/Cmd+k</code>) or a keyboard shortcut to
quickly fold or unfold all cells.</span></span></div><div><span class="markdown prose dark:prose-invert"><span class="paragraph">If you have <a href="https://github.com/astral-sh/ruff" rel="noopener" target="_blank">ruff</a> installed,
you can format a cell with the keyboard shortcut <code>Ctrl/Cmd+b</code>.</span></span></div><div><span class="markdown prose dark:prose-invert"><span class="paragraph">Use <code>Ctrl/Cmd+k</code> to open the command palette.</span></span></div><div><span class="markdown prose dark:prose-invert"><span class="paragraph">Open the notebook menu (top-right) or input <code>Ctrl/Cmd+Shift+h</code> to
view a list of all keyboard shortcuts.</span></span></div><div><span class="markdown prose dark:prose-invert"><span class="paragraph">Configure the editor by clicking the gears icon near the top-right
of the screen.</span></span></div><div><span class="markdown prose dark:prose-invert"><span class="paragraph">You can leave Marimo &amp; shut down the server by clicking the
circled X at the top right of the screen and responding
to the prompt. </span>
<span class="paragraph">üíæ <em>Be sure to save your work first!</em> </span></span></div></marimo-accordion>
            </marimo-cell-output>
            <marimo-cell-code hidden="">mo.accordion(tips)</marimo-cell-code>
        </marimo-island>
</section>
<section id="finally-a-fun-fact" class="level2">
<h2 class="anchored" data-anchor-id="finally-a-fun-fact">Finally, a fun fact</h2>
<!---->
<p>The name ‚Äúmarimo‚Äù is a reference to a type of algae that, under the right conditions, clumps together to form a small sphere called a ‚Äúmarimo moss ball‚Äù. Made of just strands of algae, these beloved assemblages are greater than the sum of their parts.</p>
<marimo-island data-app-id="main" data-cell-id="ZHCJ" data-reactive="true">
    <marimo-cell-output>
    <span></span>
    </marimo-cell-output>
    <marimo-cell-code hidden="">tips%20%3D%20%7B%0A%20%20%20%20%22Saving%22%3A%20(%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20**Saving**%0A%0A%20%20%20%20%20%20%20%20-%20_Name_%20your%20app%20using%20the%20box%20at%20the%20top%20of%20the%20screen%2C%20or%0A%20%20%20%20%20%20%20%20%20%20with%20%60Ctrl%2FCmd%2Bs%60.%20You%20can%20also%20create%20a%20named%20app%20at%20the%0A%20%20%20%20%20%20%20%20%20%20command%20line%2C%20e.g.%2C%20%60marimo%20edit%20app_name.py%60.%0A%0A%20%20%20%20%20%20%20%20-%20_Save_%20by%20clicking%20the%20save%20icon%20on%20the%20bottom%20right%2C%20or%20by%0A%20%20%20%20%20%20%20%20%20%20inputting%20%60Ctrl%2FCmd%2Bs%60.%20By%20default%20marimo%20is%20configured%0A%20%20%20%20%20%20%20%20%20%20to%20autosave.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20)%2C%0A%20%20%20%20%22Running%22%3A%20(%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%201.%20_Run%20a%20cell_%20by%20clicking%20the%20play%20(%20%E2%96%B7%20)%20button%20on%20the%20top%0A%20%20%20%20%20%20%20%20right%20of%20a%20cell%2C%20or%20by%20inputting%20%60Ctrl%2FCmd%2BEnter%60.%0A%0A%20%20%20%20%20%20%20%202.%20_Run%20a%20stale%20cell_%20%20by%20clicking%20the%20yellow%20run%20button%20on%20the%0A%20%20%20%20%20%20%20%20right%20of%20the%20cell%2C%20or%20by%20inputting%20%60Ctrl%2FCmd%2BEnter%60.%20A%20cell%20is%0A%20%20%20%20%20%20%20%20stale%20when%20its%20code%20has%20been%20modified%20but%20not%20run.%0A%0A%20%20%20%20%20%20%20%203.%20_Run%20all%20stale%20cells_%20by%20clicking%20the%20play%20(%20%E2%96%B7%20)%20button%20on%0A%20%20%20%20%20%20%20%20the%20bottom%20right%20of%20the%20screen%2C%20or%20input%20%60Ctrl%2FCmd%2BShift%2Br%60.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20)%2C%0A%20%20%20%20%22Console%20Output%22%3A%20(%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20Console%20output%20(e.g.%2C%20%60print()%60%20statements)%20is%20shown%20below%20a%0A%20%20%20%20%20%20%20%20cell.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20)%2C%0A%20%20%20%20%22Creating%2C%20Moving%2C%20and%20Deleting%20Cells%22%3A%20(%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%201.%20_Create_%20a%20new%20cell%20above%20or%20below%20a%20given%20one%20by%20clicking%0A%20%20%20%20%20%20%20%20%20%20%20%20the%20plus%20button%20to%20the%20left%20of%20the%20cell%2C%20which%20appears%20on%0A%20%20%20%20%20%20%20%20%20%20%20%20mouse%20hover.%0A%0A%20%20%20%20%20%20%20%202.%20_Move_%20a%20cell%20up%20or%20down%20by%20dragging%20on%20the%20handle%20to%20the%20%0A%20%20%20%20%20%20%20%20%20%20%20%20right%20of%20the%20cell%2C%20which%20appears%20on%20mouse%20hover.%0A%0A%20%20%20%20%20%20%20%203.%20_Delete_%20a%20cell%20by%20clicking%20the%20trash%20bin%20icon.%20Bring%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20back%20by%20clicking%20the%20undo%20button%20on%20the%20bottom%20right%20of%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20screen%2C%20or%20with%20%60Ctrl%2FCmd%2BShift%2Bz%60.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20)%2C%0A%20%20%20%20%22Disabling%20Automatic%20Execution%22%3A%20(%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20Via%20the%20notebook%20settings%20(gear%20icon)%20or%20footer%20panel%2C%20you%0A%20%20%20%20%20%20%20%20can%20disable%20automatic%20execution.%20This%20is%20helpful%20when%0A%20%20%20%20%20%20%20%20working%20with%20expensive%20notebooks%20or%20notebooks%20that%20have%0A%20%20%20%20%20%20%20%20side-effects%20like%20database%20transactions.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20)%2C%0A%20%20%20%20%22Disabling%20Cells%22%3A%20(%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20You%20can%20disable%20a%20cell%20via%20the%20cell%20context%20menu.%0A%20%20%20%20%20%20%20%20marimo%20will%20never%20run%20a%20disabled%20cell%20or%20any%20cells%20that%20depend%20on%20it.%0A%20%20%20%20%20%20%20%20This%20can%20help%20prevent%20accidental%20execution%20of%20expensive%20computations%0A%20%20%20%20%20%20%20%20when%20editing%20a%20notebook.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20)%2C%0A%20%20%20%20%22Code%20Folding%22%3A%20(%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20You%20can%20collapse%20or%20fold%20the%20code%20in%20a%20cell%20by%20clicking%20the%20arrow%0A%20%20%20%20%20%20%20%20icons%20in%20the%20line%20number%20column%20to%20the%20left%2C%20or%20by%20using%20keyboard%0A%20%20%20%20%20%20%20%20shortcuts.%0A%0A%20%20%20%20%20%20%20%20Use%20the%20command%20palette%20(%60Ctrl%2FCmd%2Bk%60)%20or%20a%20keyboard%20shortcut%20to%0A%20%20%20%20%20%20%20%20quickly%20fold%20or%20unfold%20all%20cells.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20)%2C%0A%20%20%20%20%22Code%20Formatting%22%3A%20(%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20If%20you%20have%20%5Bruff%5D(https%3A%2F%2Fgithub.com%2Fastral-sh%2Fruff)%20installed%2C%0A%20%20%20%20%20%20%20%20you%20can%20format%20a%20cell%20with%20the%20keyboard%20shortcut%20%60Ctrl%2FCmd%2Bb%60.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20)%2C%0A%20%20%20%20%22Command%20Palette%22%3A%20(%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20Use%20%60Ctrl%2FCmd%2Bk%60%20to%20open%20the%20command%20palette.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20)%2C%0A%20%20%20%20%22Keyboard%20Shortcuts%22%3A%20(%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20Open%20the%20notebook%20menu%20(top-right)%20or%20input%20%60Ctrl%2FCmd%2BShift%2Bh%60%20to%0A%20%20%20%20%20%20%20%20view%20a%20list%20of%20all%20keyboard%20shortcuts.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20)%2C%0A%20%20%20%20%22Configuration%22%3A%20(%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20Configure%20the%20editor%20by%20clicking%20the%20gears%20icon%20near%20the%20top-right%0A%20%20%20%20%20%20%20of%20the%20screen.%0A%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20)%2C%0A%20%20%20%20%22Exit%20%26%20Shutdown%22%3A%20(%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20You%20can%20leave%20Marimo%20%26%20shut%20down%20the%20server%20by%20clicking%20the%0A%20%20%20%20%20%20%20circled%20X%20at%20the%20top%20right%20of%20the%20screen%20and%20responding%0A%20%20%20%20%20%20%20to%20the%20prompt.%20%0A%0A%20%20%20%20%20%20%20%3Afloppy_disk%3A%20_Be%20sure%20to%20save%20your%20work%20first!_%20%0A%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20)%2C%0A%7D</marimo-cell-code>
</marimo-island>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/mirianlima\.github\.io\/nexus-package\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>